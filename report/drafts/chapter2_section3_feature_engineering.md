# 第2章 資料處理

## 2.3 特徵工程與場景篩選

### 核心目標

本步驟將資料**嚴格限縮於「道德兩難」情境**，並建立相關特徵。
為了確保後續分析與模型預測的有效性，我們移除了所有「非衝突」場景（即守法與救多數一致的送分題）。

### 資料過濾結果

- **原始資料量**: 377,592 行
- **過濾後資料量**: 187,358 行 (僅包含衝突場景)
- **移除資料量**: 190,234 行 (50.4%)
- **篩選標準**: `lawful_vs_majority_conflict == 1`

### 場景層級特徵統計

由於資料已篩選為衝突場景，`lawful_vs_majority_conflict` 的平均值為 1.0。

| 特徵名稱 | 說明 | 平均值 |
|---------|------|--------|
| is_lawful | 該側是否守法（1=守法綠燈, 0=違法紅燈） | 0.500 |
| is_majority | 該側是否為多數（1=人數較多, 0=人數較少） | 0.500 |
| chose_lawful | 使用者是否選擇守法側（1=是, 0=否） | 0.226 |
| chose_majority | 使用者是否選擇多數側（1=是, 0=否） | 0.274 |

### 關鍵數據指標

- **衝突場景數**: 93,679 個
- **守法選擇的場景數**: 42,288 個
- **行層級 chose_lawful 平均值**: 0.226（22.6%）

#### ⚠️ 計算方法說明

由於每個場景在資料中以**兩行**呈現（守法側與多數側各一行），存在兩種計算守法選擇率的方式：

| 計算方式 | 公式 | 結果 | 使用場合 |
|---------|------|------|---------|
| **行層級** | 42,288 ÷ 187,358 行 | **22.6%** | 統計模型（迴歸、HLM） |
| **場景層級** | 42,288 ÷ 93,679 場景 | **45.1%** | 描述性報告 |

**後續章節說明**：第 3-5 章的統計分析均採用「行層級」資料，因此 `chose_lawful` 平均值報告為 **22.6%**。此數值與場景層級的 45.1% 並不矛盾，僅為計算基準不同。

### 國家層級特徵

已整合 `CountriesChangePr.csv` 的 AMCE 值，用於後續階層模型分析。

### 使用者道德側寫

- **側寫使用者數**: 86,401 位
- **平均完成衝突場景數**: 1.1 個

**效益主義傾向分佈**:
- 強效益主義 (>0.7): 46,471 位 (53.8%)

### 結論

本資料集現已準備好進行分析。所有後續章節（探索性分析、推論統計、預測模型）
都將基於此「純衝突」資料集進行，確保研究聚焦於真實的道德權衡。